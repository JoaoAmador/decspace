<!DOCTYPE html>
<html>
  <head>
    <title>Delphi Survey</title>

    <meta name = 'viewport' content = 'width = device-width, initial-scale = 1'>

    <!-- CSS Stylesheet -->
    <link rel = 'stylesheet' type = 'text/css' href = '../../css/index.css'/>
    <link rel = 'stylesheet' type = 'text/css' href = '../../css/delphi-survey.css'/>

    <!-- jQuery -->
    <script type = 'text/javascript' src = '../../js/shared/jquery-3.1.0.js'></script>
    <script type = 'text/javascript' src = '../../js/shared/jquery-ui-1.12.0/jquery-ui.js'></script>

    <!-- AngularJS -->
    <script src = '../../js/shared/angular.min.js'></script>

    <!-- AngularJS Modules -->
    <script src = '../../js/app.js'></script>

    <!-- AngularJS Controllers -->
    <script src = '../../js/controllers/project-management/DelphiSurveyController.js'></script>

    <!-- Bootstrap -->
    <link rel = 'stylesheet' href = '../../js/shared/bootstrap-3.3.7-dist/css/bootstrap.min.css'/>
    <script type = 'text/javascript' src = '../../js/shared/bootstrap-3.3.7-dist/js/bootstrap.js'></script>

    <!-- Google Web Fonts -->
    <link href = 'https://fonts.googleapis.com/css?family=Open+Sans:400,600i' rel = 'stylesheet'>

    <!-- ng-draggable module -->
    <script src = '../../js/shared/ng-draggable/ngDraggable.js'></script>
  </head>

  <body ng-app = 'decspace' ng-controller = 'DelphiSurveyController'>

    <!-- Navigation Bar -->
    <nav class = 'navbar navbar-custom navbar-fixed-top'>
      <div class = 'container'>
        <!-- Title -->
        <div class = 'navbar-header'>
          <a class = 'navbar-brand' href = '../../index.html'>DecSpace</a>
        </div>

        <!-- About, FAQ and Contact Us links. Sign Up and Log In buttons. -->
        <ul class = 'nav navbar-nav navbar-right'>
          <li>
            <p class = 'navbar-text' style = 'font-weight:600;font-style:italic'>Welcome, {{user_id}}!</p>
          </li>

          <li><a href = '../homepage/about.html'>About</a></li>

          <li><a href = '../homepage/faq.html'>FAQ</a></li>

          <li><a href = '../homepage/contactus.html'>Contact Us</a></li>
        </ul>

      </div>
    </nav>

    <div id = 'main-content' class = 'container'>

      <!-- Button Bar -->
        <div class = 'btn-toolbar col-md-4' role = 'toolbar' style = 'position:fixed'>
          <div class = 'btn-group' role = 'group'>
            <!-- Save Button -->
            <button type = 'button' class = 'btn btn-primary' ng-click = 'saveData()' title = 'Save Data'>
              <span class = 'glyphicon glyphicon-floppy-save icon-large'></span>
            </button>

            <!-- Reload Data Button -->
            <button type = 'button' class = 'btn btn-info' ng-click = 'reloadData()' title = 'Reload Data'>
              <span class = 'glyphicon glyphicon-refresh'></span>
            </button>

            <!-- Reset Data Button -->
            <button type = 'button' class = 'btn btn-danger' ng-click = 'resetData()' title = 'Reset Data' ng-if = '!showResetData'>
              <span class = 'glyphicon glyphicon-trash'></span>
            </button>

            <!-- Confirm Reset Data -->
            <button type = 'button' class = 'btn btn-success' ng-click = 'confirmResetData()' title = 'Confirm Data Reset' ng-if = 'showResetData'>
              <span class = 'glyphicon glyphicon-ok'></span>
            </button>

            <!-- Cancel Reset Data -->
            <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelResetData()' title = 'Cancel Data Reset' ng-if = 'showResetData'>
              <span class = 'glyphicon glyphicon-remove'></span>
            </button>
          </div>
        </div>

        <!-- Data Saved Alert -->
        <div class = 'alert alert-success alert-dismissible col-md-8' role = 'alert' ng-if = 'showSaveSuccess'  ng-cloak>
          <button type = 'button' class = 'close' data-dismiss = 'alert' aria-label = 'Close' ng-click = 'changeSaveSuccess()'>
            <span aria-hidden = 'true'>&times;</span>
          </button>
          Data <strong>successfully</strong> saved.
        </div>

      <br><br>

      <div class = 'row'>

      </div>

      <div class = 'row'>
        <!-- Drop Areas -->
        <div style = 'position:fixed'>
          <div class = 'row' ng-repeat = 'row in matrix'>
            <div class = 'div_pos' ng-if = '$parent.$index == 0' ng-repeat = 'pos in row track by $index'>
              <div ng-if = '$index == 0'>
                Least Important
              </div>
              <div ng-if = 'pos == 0'>
                Neutral
              </div>
              <div ng-if = '$index == row.length - 1'>
                Most Important
              </div>
              {{pos}}
            </div>
          </div>

          <div class = 'row' ng-repeat = 'row in matrix'>
            <div ng-drop = 'true' ng-drop-success = 'onDropComplete($data, row , $index)' ng-repeat = 'position in row track by $index' ng-center-anchor = '{{centerAnchor}}' ng-if = 'position != "null"' ng-class = '{"green_drop" : position > 0, "red_drop" : position < 0, "grey_drop" : position == 0}'>
              <div ng-repeat = 'question in questions_answered' ng-drag = 'true' ng-drag-data = 'question' ng-center-anchor = '{{centerAnchor}}' ng-if = 'checkQuestionPosition(question, row, $parent.$index)' title = '{{question.content}}'>
                {{question.content}}
              </div>
            </div>
          </div>
        </div>

        <!-- Questions -->
        <div>
          <ul class = 'draggable-objects'>
            <li ng-repeat = 'question in questions_unanswered'>
              <div ng-drag = 'true' ng-drag-data = 'question' data-allow-transform = 'true' title = '{{question.content}}'>
                {{question.content}}
              </div>
            </li>
          </ul>
        </div>
      </div>

    </div>
  </body>
</html>
