<!DOCTYPE html>
<html>
  <head>
    <title>DecSpace - Projects</title>

    <meta name = 'viewport' content = 'width = device-width, initial-scale = 1'>

    <!-- CSS Stylesheet -->
    <link rel = 'stylesheet' type = 'text/css' href = '../../css/index.css'/>
    <link rel = 'stylesheet' type = 'text/css' href = '../../css/project-management.css'/>

    <!-- jQuery -->
    <script type = 'text/javascript' src = '../../js/shared/jquery-3.1.0.js'></script>
    <script type = 'text/javascript' src = '../../js/shared/jquery-ui-1.12.0/jquery-ui.js'></script>

    <!-- AngularJS -->
    <script src = '../../js/shared/angular.min.js'></script>

    <!-- AngularJS Modules -->
    <script src = '../../js/app.js'></script>

    <!-- AngularJS Controllers -->
    <script src = '../../js/controllers/project-management/ProjectManagementController.js'></script>

    <!-- AngularJS Services -->
    <script src = '../../js/services/SortDataService.js'></script>

    <!-- Bootstrap -->
    <link rel = 'stylesheet' href = '../../js/shared/bootstrap-3.3.7-dist/css/bootstrap.min.css'/>
    <script type = 'text/javascript' src = '../../js/shared/bootstrap-3.3.7-dist/js/bootstrap.js'></script>

    <!-- Google Web Fonts -->
    <link href = 'https://fonts.googleapis.com/css?family=Open+Sans:400,600i' rel = 'stylesheet'>

    <!-- ng-draggable module -->
    <script src = '../../js/shared/ng-draggable/ngDraggable.js'></script>

    <!-- Font Awesome -->
    <link rel = 'stylesheet' href = '../../js/shared/font-awesome-4.7.0/css/font-awesome.css'></link>
  </head>

  <body ng-app = 'decspace' ng-controller = 'ProjectManagementController'>

    <!-- Navigation Bar -->
    <nav class = 'navbar navbar-custom navbar-fixed-top'>
      <div class = 'container'>
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class = 'navbar-header'>
          <button type = 'button' class = 'navbar-toggle collapsed' data-toggle = 'collapse' data-target = '#top-navbar' aria-expanded = 'false'>
            <span class = 'sr-only'>Toggle navigation</span>
            <span class = 'icon-bar'></span>
            <span class = 'icon-bar'></span>
            <span class = 'icon-bar'></span>
          </button>
          <!-- Title -->
          <a class = 'navbar-brand' href = '../dashboard/dashboard.html'>DecSpace</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class = 'collapse navbar-collapse' id = 'top-navbar'>
          <!-- About, FAQ and Contact Us links. Sign Up and Log In buttons. -->
          <ul class = 'nav navbar-nav navbar-right'>
            <li>
              <p class = 'navbar-text' style = 'font-weight: 600; font-style: italic'>Welcome, {{name}}!</p>
            </li>

            <li><a href = '../homepage/about.html'>About</a></li>

            <li><a href = '../method-catalog/method-catalog.html'>Method Catalog</a></li>

            <li><a href = '../homepage/faq.html'>FAQ</a></li>

            <li><a href = '../homepage/contactus.html'>Contact Us</a></li>

            <li>
              <button type = 'button' class = 'btn btn-default navbar-btn' ng-click = 'logOut()'>
                <span class = 'glyphicon glyphicon-log-out'></span>
                Log Out
              </button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div id = 'main-content' class = 'container'>

      <ul class = 'breadcrumb'>
        <li><a href = '../dashboard/dashboard.html'>Dashboard</a></li>
        <li class = 'active'>Projects</li>
      </ul>

      <div class = 'row'>
        <span class = 'header-1' style = 'margin-left: 10%'>Projects</span>

        <button type = 'button' class = 'btn btn-default' ng-click = 'changeView("list")' title = 'List View' style = 'float: right; margin-top: 1%' ng-class = '{active : current_view == "list"}'>
          <i class = 'fa fa-list fa-lg'></i>
        </button>

        <button type = 'button' class = 'btn btn-default' ng-click = 'changeView("table")' title = 'Table View' style = 'float: right; margin-top: 1%' ng-class = '{active : current_view == "table"}'>
          <i class = 'fa fa-table fa-lg'></i>
        </button>
      </div>

      <br>

      <!-- TABLE VIEW -->
      <div ng-if = 'current_view == "table"'>
        <table class = 'table table-bordered table-hover' data-toggle = 'table'>
          <thead>
            <tr>
              <th class = 'text-center'>
                Name
                <a href = ''><span class = 'glyphicon glyphicon-triangle-bottom' style = 'float: right' ng-click = 'changeCurrentOrder("name", "descendant")' title = "Sort 'Name' Downwards"></span></a>
                <a href = ''><span class = 'glyphicon glyphicon-triangle-top' style = 'float: right' ng-click = 'changeCurrentOrder("name", "ascendant")' title = "Sort 'Name' Upwards"></span></a>
              </th>
              <th class = 'text-center'>
                Method
                <a href = ''><span class = 'glyphicon glyphicon-triangle-bottom' style = 'float: right' ng-click = 'changeCurrentOrder("method", "descendant")' title = "Sort 'Method' Downwards"></span></a>
                <a href = ''><span class = 'glyphicon glyphicon-triangle-top' style = 'float: right' ng-click = 'changeCurrentOrder("method", "ascendant")' title = "Sort 'Method' Upwards"></span></a>
              </th>
              <th class = 'text-center'>
                Creation Date
                <a href = ''><span class = 'glyphicon glyphicon-triangle-bottom' style = 'float: right' ng-click = 'changeCurrentOrder("creation_date", "descendant")' title = "Sort 'Creation Date' Downwards"></span></a>
                <a href = ''><span class = 'glyphicon glyphicon-triangle-top' style = 'float: right' ng-click = 'changeCurrentOrder("creation_date", "ascendant")' title = "Sort 'Creation Date' Upwards"></span></a>
              </th>
              <th class = 'text-center'>
                Last Update
                <a href = ''><span class = 'glyphicon glyphicon-triangle-bottom' style = 'float: right' ng-click = 'changeCurrentOrder("last_update", "descendant")' title = "Sort 'Last Update' Downwards"></span></a>
                <a href = ''><span class = 'glyphicon glyphicon-triangle-top' style = 'float: right' ng-click = 'changeCurrentOrder("last_update", "ascendant")' title = "Sort 'Last Update' Upwards"></span></a>
              </th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat = 'project in projects' ng-class = '{danger: delete_id_project == project.project_id}'>
              <!-- Project Name -->
              <td>{{project.name}}</td>

              <!-- Project Method -->
              <td>{{project.method}}</td>

              <!-- Creation Date -->
              <td>{{project.creation_date}}</td>

              <!-- Last Update -->
              <td>{{project.last_update}}</td>

              <!-- Open, Edit, Duplicate and Delete Project -->
              <td ng-if = 'delete_id_project != project.project_id'>
                <button type = 'button' class = 'btn btn-primary' ng-click = 'openProject(project)' title = 'Open Project'>
                  <span class = 'glyphicon glyphicon-folder-open'></span>
                </button>

                <button type = 'button' class = 'btn btn-info' ng-click = 'duplicateProject(project)' title = 'Duplicate Project'>
                  <span class = 'glyphicon glyphicon-duplicate'></span>
                </button>

                <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteProject(project)' title = 'Delete Project'>
                  <span class = 'glyphicon glyphicon-minus'></span>
                </button>
              </td>
              <td ng-if = 'delete_id_project == project.project_id'>
                <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDelete(project)' title = 'Confirm Delete'>
                  <span class = 'glyphicon glyphicon-ok'></span>
                </button>
                <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDelete()' title = 'Cancel Delete'>
                  <span class = 'glyphicon glyphicon-remove'></span>
                </button>
              </td>
            </tr>

            <tr class = 'active'>
              <!-- Name Input -->
              <td>
                <div id = 'new-project-name'>
                  <input type = 'text' class = 'form-control' placeholder = 'New Project Name' ng-model = 'project.name'>
                </div>
              </td>

              <!-- Method List -->
              <td>
                <div id = 'new-project-method'>
                  <select class = 'form-control' ng-model = 'project.method'>
                    <option value = '' selected disabled>--- Please Select ---</option>
                    <option>CAT-SD</option>
                    <option>Delphi</option>
                    <option>OrderBy</option>
                    <option>Sort</option>
                    <option>SRF</option>
                  </select>
                </div>
              </td>

              <td></td>

              <td></td>

              <!-- Add Button -->
              <td>
                <button type = 'button' class = 'btn btn-success btn-add' ng-click = 'addProject()' title = 'Add Project'>
                  <span class = 'glyphicon glyphicon-plus'></span>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- LIST VIEW -->
      <div ng-if = 'current_view == "list"' ng-cloak>
        <table class = 'table table-hover' style = 'border: none'>
          <thead>
            <tr>
              <th class = 'col-md-1' style = 'border: none'></th>
              <th class = 'col-md-8' style = 'border: none'></th>
              <th class = 'col-md-3' style = 'border: none'></th>
            </tr>
          </thead>

          <!-- NAME LIST -->
          <tbody style = 'border: none'>
            <tr ng-click = 'openList("name")' ng-class = '{active: current_list == "name"}'>
              <td>
                <a href ng-if = 'current_list != "name"'><span class = 'glyphicon glyphicon-chevron-right'></span></a>
                <a href ng-if = 'current_list == "name"'><span class = 'glyphicon glyphicon-chevron-down'></span></a>
              </td>
              <td colspan = '2'><strong style = 'margin-left: -8%'>Name</strong></td>
            </tr>
            <tr ng-repeat = 'project in projects' ng-if = 'current_list == "name"' ng-class = '{danger: delete_id_project == project.project_id}' ng-cloak>
              <td></td>
              <td><span style = 'margin-left: 27%'>{{project.name}}</span></td>
              <!-- Open, Edit, Duplicate and Delete Project -->
              <td ng-if = 'delete_id_project != project.project_id'>
                <button type = 'button' class = 'btn btn-primary' ng-click = 'openProject(project)' title = 'Open Project'>
                  <span class = 'glyphicon glyphicon-folder-open'></span>
                </button>

                <button type = 'button' class = 'btn btn-info' ng-click = 'duplicateProject(project)' title = 'Duplicate Project'>
                  <span class = 'glyphicon glyphicon-duplicate'></span>
                </button>

                <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteProject(project)' title = 'Delete Project'>
                  <span class = 'glyphicon glyphicon-minus'></span>
                </button>
              </td>
              <td ng-if = 'delete_id_project == project.project_id'>
                <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDelete(project)' title = 'Confirm Delete'>
                  <span class = 'glyphicon glyphicon-ok'></span>
                </button>
                <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDelete()' title = 'Cancel Delete'>
                  <span class = 'glyphicon glyphicon-remove'></span>
                </button>
              </td>
            </tr>
          </tbody>

          <!-- METHOD LIST -->
          <tbody style = 'border: none'>
            <tr ng-click = 'openList("method")' ng-class = '{active: current_list == "method"}'>
              <td>
                <a href ng-if = 'current_list != "method"'><span class = 'glyphicon glyphicon-chevron-right'></span></a>
                <a href ng-if = 'current_list == "method"'><span class = 'glyphicon glyphicon-chevron-down'></span></a>
              </td>
              <td colspan = '2'><strong style = 'margin-left: -8%'>Method</strong></td>
            </tr>
          </tbody>

          <tbody ng-repeat = 'method in methods' style = 'border: none'>
            <tr ng-click = 'openMethodList(method)' ng-if = 'current_list == "method"' ng-class = '{active: method_list == method}'>
              <td></td>
              <td colspan = '2'>
                <a href ng-if = 'method_list != method'><span class = 'glyphicon glyphicon-chevron-right' style = 'float: left'></span></a>
                <a href ng-if = 'method_list == method'><span class = 'glyphicon glyphicon-chevron-down' style = 'float: left'></span></a>
                <strong style = 'margin-left: -7%'>{{method}}</strong>
              </td>
            </tr>
            <tr ng-repeat = 'project in projects' ng-if = 'method_list == method && project.method == method' ng-class = '{danger: delete_id_project == project.project_id}' ng-cloak>
              <td></td>
              <td><span style = 'margin-left: 30%'>{{project.name}}</span></td>
              <!-- Open, Edit, Duplicate and Delete Project -->
              <td ng-if = 'delete_id_project != project.project_id'>
                <button type = 'button' class = 'btn btn-primary' ng-click = 'openProject(project)' title = 'Open Project'>
                  <span class = 'glyphicon glyphicon-folder-open'></span>
                </button>

                <button type = 'button' class = 'btn btn-info' ng-click = 'duplicateProject(project)' title = 'Duplicate Project'>
                  <span class = 'glyphicon glyphicon-duplicate'></span>
                </button>

                <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteProject(project)' title = 'Delete Project'>
                  <span class = 'glyphicon glyphicon-minus'></span>
                </button>
              </td>
              <td ng-if = 'delete_id_project == project.project_id'>
                <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDelete(project)' title = 'Confirm Delete'>
                  <span class = 'glyphicon glyphicon-ok'></span>
                </button>
                <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDelete()' title = 'Cancel Delete'>
                  <span class = 'glyphicon glyphicon-remove'></span>
                </button>
              </td>
            </tr>
          </tbody>

          <!-- CREATION DATE LIST -->
          <tbody style = 'border: none'>
            <tr ng-click = 'openList("creation_date")' ng-class = '{active: current_list == "creation_date"}'>
              <td>
                <a href ng-if = 'current_list != "creation_date"'><span class = 'glyphicon glyphicon-chevron-right'></span></a>
                <a href ng-if = 'current_list == "creation_date"'><span class = 'glyphicon glyphicon-chevron-down'></span></a>
              </td>
              <td colspan = '2'><strong style = 'margin-left: -8%'>Creation Date</strong></td>
            </tr>
            <tr ng-repeat = 'project in projects' ng-if = 'current_list == "creation_date"' ng-class = '{danger: delete_id_project == project.project_id}' ng-cloak>
              <td></td>
              <td><span style = 'margin-left: 27%'>{{project.name}} ({{project.creation_date}})</span></td>
              <!-- Open, Edit, Duplicate and Delete Project -->
              <td ng-if = 'delete_id_project != project.project_id'>
                <button type = 'button' class = 'btn btn-primary' ng-click = 'openProject(project)' title = 'Open Project'>
                  <span class = 'glyphicon glyphicon-folder-open'></span>
                </button>

                <button type = 'button' class = 'btn btn-info' ng-click = 'duplicateProject(project)' title = 'Duplicate Project'>
                  <span class = 'glyphicon glyphicon-duplicate'></span>
                </button>

                <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteProject(project)' title = 'Delete Project'>
                  <span class = 'glyphicon glyphicon-minus'></span>
                </button>
              </td>
              <td ng-if = 'delete_id_project == project.project_id'>
                <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDelete(project)' title = 'Confirm Delete'>
                  <span class = 'glyphicon glyphicon-ok'></span>
                </button>
                <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDelete()' title = 'Cancel Delete'>
                  <span class = 'glyphicon glyphicon-remove'></span>
                </button>
              </td>
            </tr>
          </tbody>

          <!-- LAST UPDATE LIST -->
          <tbody style = 'border: none'>
            <tr ng-click = 'openList("last_update")' ng-class = '{active: current_list == "last_update"}'>
              <td>
                <a href ng-if = 'current_list != "last_update"'><span class = 'glyphicon glyphicon-chevron-right'></span></a>
                <a href ng-if = 'current_list == "last_update"'><span class = 'glyphicon glyphicon-chevron-down'></span></a>
              </td>
              <td colspan = '2'><strong style = 'margin-left: -8%'>Last Update</strong></td>
            </tr>
            <tr ng-repeat = 'project in projects' ng-if = 'current_list == "last_update"' ng-class = '{danger: delete_id_project == project.project_id}' ng-cloak>
              <td></td>
              <td><span style = 'margin-left: 27%'>{{project.name}} ({{project.last_update}})</span></td>
              <!-- Open, Edit, Duplicate and Delete Project -->
              <td ng-if = 'delete_id_project != project.project_id'>
                <button type = 'button' class = 'btn btn-primary' ng-click = 'openProject(project)' title = 'Open Project'>
                  <span class = 'glyphicon glyphicon-folder-open'></span>
                </button>

                <button type = 'button' class = 'btn btn-info' ng-click = 'duplicateProject(project)' title = 'Duplicate Project'>
                  <span class = 'glyphicon glyphicon-duplicate'></span>
                </button>

                <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteProject(project)' title = 'Delete Project'>
                  <span class = 'glyphicon glyphicon-minus'></span>
                </button>
              </td>
              <td ng-if = 'delete_id_project == project.project_id'>
                <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDelete(project)' title = 'Confirm Delete'>
                  <span class = 'glyphicon glyphicon-ok'></span>
                </button>
                <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDelete()' title = 'Cancel Delete'>
                  <span class = 'glyphicon glyphicon-remove'></span>
                </button>
              </td>
            </tr>
          </tbody>
        </table>

        <!-- NEW PROJECT -->
        <table class = 'table table-hover'>
          <tbody>
            <tr class = 'active'>
              <!-- Name Input -->
              <td>
                <div id = 'new-project-name'>
                  <input type = 'text' class = 'form-control' placeholder = 'New Project Name' ng-model = 'project.name'>
                </div>
              </td>

              <!-- Method List -->
              <td>
                <div id = 'new-project-method'>
                  <select class = 'form-control' ng-model = 'project.method'>
                    <option value = '' selected disabled>--- Please Select ---</option>
                    <option>CAT-SD</option>
                    <option>Delphi</option>
                    <option>OrderBy</option>
                    <option>Sort</option>
                    <option>SRF</option>
                  </select>
                </div>
              </td>

              <!-- Add Button -->
              <td>
                <button type = 'button' class = 'btn btn-success btn-add' ng-click = 'addProject()' title = 'Add Project'>
                  <span class = 'glyphicon glyphicon-plus'></span>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Delete All Projects Button -->
      <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteAllProjects()' data-toggle = 'modal' data-target = '#delete-all-projects-modal' style = 'float: right' ng-if = 'projects.length > 0'>
        Delete All Projects
      </button>

      <br><br>

      <!-- Delete All Projects Modal -->
      <div class = 'modal fade' id = 'delete-all-projects-modal' role = 'dialog'>
        <div class = 'modal-dialog'>
          <div class = 'modal-content'>
            <div class = 'modal-header'>
              <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
              <h4 class = 'modal-title'>Are you sure you want to delete all 'Single-Method' projects?</h4>
            </div>
            <div class = 'modal-body'>
              <div class = 'row'>
                <div class = 'col-md-2'>
                </div>

                <div class = 'col-md-4'>
                  <button type = 'button' class = 'btn btn-primary' ng-click = 'confirmDeleteAll()' data-dismiss = 'modal' title = 'Confirm Delete All Projects'>
                    Yes
                  </button>
                </div>

                <div class = 'col-md-4'>
                  <button type = 'button' class = 'btn btn-primary' data-dismiss = 'modal' title = 'Cancel Delete All Projects'>
                    No
                  </button>
                </div>

                <div class = 'col-md-2'></div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </body>
</html>
